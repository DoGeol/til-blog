# 2022-04-24

>âœ…ï¸ **ì•Œ**ê³ ë‚˜ë©´ **ì“¸**ëª¨ìˆëŠ” **ì‹ **ë°•í•œ **ì¡**ê¸°ìˆ 

## Blob íƒ€ì…ìœ¼ë¡œ File Download í•˜ê¸°
>ğŸ’¡Blob(Binary Large Object) ì´ë€?   
> ì´ë¯¸ì§€, ì‚¬ìš´ë“œ, ë¹„ë””ì˜¤ ê°™ì€ ë©€í‹°ë¯¸ë””ì–´ ë°ì´í„°ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ Binary ê°ì²´   

Javascriptì—ì„œ ì´ë¯¸ì§€, ë™ì˜ìƒ, ì••ì¶• íŒŒì¼ì˜ **ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ**ì— Blobì´ ì‚¬ìš©ëœë‹¤   
* ì—…ë¡œë“œ   
  input [type="file"]ìœ¼ë¡œ fileê°ì²´ë¥¼ formDataì— ë‹´ì•„ APIë¥¼ í†µí•´ DBì— ì €ì¥
  ```javascript
  // HTML
  <input class="file_upload" type="file" style="display: none" />
  
  // Javascript 
  const file = window.querySelector('.file_upload').file.files[0]
  ... 
  const data = new FormData()
  data.append(file)
  
  axios({
    headers: {
      'Content-Type': 'multipart/form-data',
    },
    url: apiPath,
    method: 'post',
    data,
  })
  ```

* ë‹¤ìš´ë¡œë“œ   
  APIë¥¼ í†µí•´ ì „ë‹¬ ë°›ì€ Dataë¥¼ content-typeì„ ì§€ì •í•˜ì—¬ ì „ë‹¬ë°›ì•„ íŠ¹ì • ë°©ë²•ì„ í†µí•´ ë‹¤ìš´ë¡œë“œ ì§„í–‰  
   ```javascript
  
  axios({
     url: file_url,
     method: 'get',
     responseType: 'blob',
  }).then((response) => {
        const blobUrl = window.URL.createObjectURL(new Blob([response.data]))
        
        // * createOjectURL í•¨ìˆ˜ì— MIME_TYPEì„ 2ë²ˆì§¸ ì¸ìë¡œ ë°›ì•„ì„œ ì²˜ë¦¬ ê°€ëŠ¥
        // const blobUrl = window.URL.createObjectURL(new Blob([response.data]) , { type: 'application/zip' })
  
        const downLink = document.createElement('a')
        downLink.href = blobUrl
        downLink.setAttribute('download', 'test.png') // íŒŒì¼ì˜ origin nameì„ ì¶”ê°€ (ex. test.png / 20200202_í…ŒìŠ¤íŠ¸.zip)
        document.body.appendChild(downLink)
        downLink.click()
        document.body.removeChild(downLink)
  
        window.URL.revokeObjectURL(blobUrl) // blob urlì€ URLì´ ìœ íš¨í•˜ë‹¤ê³  íŒë‹¨í•˜ì—¬ GCë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì™„ë£Œ ì „ í•´ì œí•´ì£¼ëŠ” ìŠµê´€ í•„ìš”
     })
  ```